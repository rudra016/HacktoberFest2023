module.exports=__NEXT_REGISTER_PAGE("/menu",function(){var e=webpackJsonp([19],{207:function(e,t,r){"use strict";var n=r(13);var a=r.n(n);var c=r(0);var o=r.n(c);var u=r(16);var s=r.n(u);var i=r(9);var p=r.n(i);var l=r(2);var v=r.n(l);var f=r(11);var b=r.n(f);var d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(e){y(t,e);function t(){h(this,t);return m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d(t,[{key:"render",value:function e(){return o.a.createElement("div",{className:"ldr-wrpr"},o.a.createElement("img",{src:f["endpoints"].staticAsset+"/loader.gif"}))}}]);return t}(c["Component"]);var x=O;var g=r(24);var j=r(183);var w=r(81);var k=r(40);var _=r(43);var E=r(10);var P=r(7);var R=r(8);var I=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;"value"in n&&(n.writable=true);Object.defineProperty(e,n.key,n)}}return function(t,r,n){r&&e(t.prototype,r);n&&e(t,n);return t}}();function A(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(a,c){try{var o=t[a](c);var u=o.value}catch(e){r(e);return}if(!o.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function S(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=s()(new(r(16).SameLoopPromise)(function(e,t){var n=390;try{var a=r(n);return e(a)}catch(e){}r.e(5).then(function(n){try{var a=r(390);a.__webpackChunkName="app_components_templates_Menu_07635d69c36ae10635fd627566439f7a";e(a)}catch(e){t(e)}}.bind(null,r)).catch(r.oe)}),{ssr:false,loading:function e(){return o.a.createElement(x,null)}});var D=s()(new(r(16).SameLoopPromise)(function(e,t){var n=109;try{var a=r(n);return e(a)}catch(e){}r.e(4).then(function(n){try{var a=r(109);a.__webpackChunkName="app_components_templates_Customise_b1cbf20c85a3105a5397f7e1c5009577";e(a)}catch(e){t(e)}}.bind(null,r)).catch(r.oe)}),{ssr:false});var q=s()(new(r(16).SameLoopPromise)(function(e,t){var n=297;try{var a=r(n);return e(a)}catch(e){}r.e(6).then(function(n){try{var a=r(297);a.__webpackChunkName="app_components_templates_Edv_0f46c529c92024bf2a92f566ea218642";e(a)}catch(e){t(e)}}.bind(null,r)).catch(r.oe)}),{ssr:false});var M=function(e){S(t,e);function t(){T(this,t);return N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}I(t,[{key:"componentWillReceiveProps",value:function e(t){var r=t.pathname,n=t.storeId;var a=new Date;a.setTime(a.getTime()+216e5);"/menu"===r&&Object(E["n"])("menuExpire")!==n&&Object(E["C"])("menuExpire",n,{expires:a})}},{key:"componentDidMount",value:function e(){Object(R["C"])("Menu Screen")}},{key:"render",value:function e(){var t=this.props,r=t.pathname,n=t.isServer;var a={edv:q,menu:C,customise:D,track:C,trackOrder:C};var c=void 0;c=n?r:p.a.pathname;var u=c?c.substr(1):"menu";var s=a[u];return o.a.createElement("div",null,s?o.a.createElement(s,this.props):null)}}],[{key:"getInitialProps",value:function(){var e=A(a.a.mark(function e(t){var r=t.store,n=t.currentStack,c=t.req,o=t.isServer;var u,s,i,p,l;return a.a.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:u=[];s=Object(E["n"])("storeId",c);i="undefined"!==s&&"null"!==s&&s?s:P["i"];p=Object(E["n"])("menuExpire",c);l=v()(r.getState(),"menu.MenuData.data",[]).length;l&&p===i||(u=[k["b"],k["d"]]);u.map(function(e){return r.dispatch(e(n))});case 7:case"end":return t.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]);return t}(c["Component"]);var U=function e(t){return{pathname:v()(t,"globalBlackList.params.pathname",""),edvData:v()(t,"edvData",""),menuData:v()(t,"MenuData",""),storeId:v()(t,"global.storeId",null)}};var L=function e(t){return{getEdv:function e(r){return t(Object(_["a"])(r))},getMenu:function e(r){return t(Object(k["b"])(r))},getToppings:function e(r){return t(Object(k["d"])(r))}}};var G=Object(g["a"])(M,{key:"menu",mapStateToProps:U,mapDispatchToProps:L,reducer:j["a"],saga:w["a"],isQuery:true,initialActions:[],executeGetInitialProps:true});r.d(t,"a",function(){return G})},43:function(e,t,r){"use strict";r.d(t,"a",function(){return a});r.d(t,"b",function(){return c});r.d(t,"c",function(){return o});r.d(t,"d",function(){return u});r.d(t,"e",function(){return s});var n=r(47);var a=function e(t){return{type:n["a"],query:t}};var c=function e(t){return{type:n["b"],data:t}};var o=function e(t){return{type:n["c"],data:t}};var u=function e(t){return{type:n["d"],data:t}};var s=function e(t){return{type:n["m"],data:t}};var i=[a]},81:function(e,t,r){"use strict";t["a"]=$;var n=r(13);var a=r.n(n);var c=r(22);var o=r(20);var u=r.n(o);var s=r(77);var i=r.n(s);var p=r(2);var l=r.n(p);var v=r(17);var f=r.n(v);var b=r(11);var d=r.n(b);var h=r(40);var m=r(43);var y=r(47);var O=r(41);var x=r(12);var g=r(3);var j=r(27);var w=r(7);var k=a.a.mark(q),_=a.a.mark(M),E=a.a.mark(U),P=a.a.mark(L),R=a.a.mark(G),I=a.a.mark($);var A=null;var T=null;var N=u()(),S=N.publicRuntimeConfig;var C=S.API_END_POINT;var D=function e(t){return{categoryName:g["p"].edvCategoryName,categoryId:g["p"].edvCategoryId,categoryType:0,data:t}};function q(e){var t,r,n,o,u,s;return a.a.wrap(function a(i){while(1)switch(i.prev=i.next){case 0:i.prev=0;t=void 0;i.prev=2;i.next=5;return Object(c["b"])(v["API"].get,v["apiRegistry"].buildApiUrl(y["e"],e.query));case 5:r=i.sent;i.next=8;return Object(j["a"])(r.apiEndpoint,r.params);case 8:t=i.sent;i.next=14;break;case 11:i.prev=11;i.t0=i["catch"](2);console.log("MENU NOT FOUND");case 14:if(!(t&&t.data&&Array.isArray(t.data))){i.next=38;break}i.prev=15;i.next=18;return Object(c["b"])(v["API"].get,v["apiRegistry"].buildApiUrl(y["a"],e.query));case 18:n=i.sent;i.next=21;return Object(j["a"])(n.apiEndpoint,n.params)||{};case 21:o=i.sent;if(Object.keys(o).length)if(o.data&&Array.isArray(o.data))t.data.splice(g["p"].edvPosInHeader-1,0,D(o.data||[]));else if(o.errors){t.errors=o.errors;t.status=o.status}i.next=28;break;case 25:i.prev=25;i.t1=i["catch"](15);console.log("EDV NOT FOUND",i.t1);case 28:i.next=30;return Object(c["c"])(Object(h["c"])(t,e.menuLoaded));case 30:A=t.data;if(!(A&&T)){i.next=36;break}i.next=34;return Object(c["c"])(Object(x["P"])(A,T));case 34:A=null;T=null;case 36:i.next=42;break;case 38:u=g["m"].internalServerError;s={message:u,headerText:g["m"].ops,rightCTAText:g["m"].ok};i.next=42;return Object(c["c"])(Object(x["N"])(s));case 42:i.next=52;break;case 44:i.prev=44;i.t2=i["catch"](0);if(!(i.t2!==O["b"])){i.next=50;break}console.log("Error in Get Menu Saga",i.t2);i.next=52;break;case 50:i.next=52;return Object(c["c"])(Object(h["c"])({response:O["b"]}));case 52:case"end":return i.stop()}},k,this,[[0,44],[2,11],[15,25]])}function M(e){var t,r,n;return a.a.wrap(function a(o){while(1)switch(o.prev=o.next){case 0:o.prev=0;t=l()(e,"query.urlParam.$storeId");o.next=4;return Object(c["b"])(v["API"].get,v["apiRegistry"].buildApiUrl(y["g"],e.query));case 4:r=o.sent;o.next=7;return Object(j["a"])(r.apiEndpoint,r.params);case 7:n=o.sent;o.next=10;return Object(c["c"])(Object(h["e"])(n,e.toppingLoaded));case 10:T=n.data;if(!(A&&T)){o.next=16;break}o.next=14;return Object(c["c"])(Object(x["P"])(A,T));case 14:A=null;T=null;case 16:o.next=26;break;case 18:o.prev=18;o.t0=o["catch"](0);if(!(o.t0!==O["b"])){o.next=24;break}console.log("Error in Toppings Saga",o.t0);o.next=26;break;case 24:o.next=26;return Object(c["c"])(Object(h["e"])({response:O["b"]}));case 26:case"end":return o.stop()}},_,this,[[0,18]])}function U(e){var t,r,n,o;return a.a.wrap(function a(u){while(1)switch(u.prev=u.next){case 0:u.prev=0;t=l()(e,"query.urlParam.$storeId");u.next=4;return Object(c["b"])(v["API"].get,v["apiRegistry"].buildApiUrl(y["a"],e.query));case 4:r=u.sent;if(!(t===w["i"])){u.next=11;break}u.next=8;return i()(b["endpoints"][C].domain+"/static/fallBackData/edv.json").then(function(e){return e.data});case 8:u.t0=u.sent;u.next=14;break;case 11:u.next=13;return Object(j["a"])(r.apiEndpoint,r.params);case 13:u.t0=u.sent;case 14:n=u.t0;o={};o[e.query.urlParam.$storeId]=n;u.next=19;return Object(c["c"])(Object(m["d"])(o));case 19:u.next=24;break;case 21:u.prev=21;u.t1=u["catch"](0);console.log("ERROR in get Edv saga call",u.t1);case 24:case"end":return u.stop()}},E,this,[[0,21]])}function L(e){var t,r;return a.a.wrap(function n(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(c["c"])(Object(x["O"])(true));case 3:a.next=5;return Object(c["b"])(v["API"].get,v["apiRegistry"].buildApiUrl(y["b"],e.data),void 0,true);case 5:t=a.sent;a.next=8;return Object(j["a"])(t.apiEndpoint,t.params);case 8:r=a.sent;a.next=11;return Object(c["c"])(Object(m["c"])(r));case 11:a.next=16;break;case 13:a.prev=13;a.t0=a["catch"](0);console.log("ERROR in get Edv offer saga call",a.t0);case 16:a.prev=16;a.next=19;return Object(c["c"])(Object(x["O"])(false));case 19:return a.finish(16);case 20:case"end":return a.stop()}},P,this,[[0,13,16,20]])}function G(e){var t;return a.a.wrap(function r(n){while(1)switch(n.prev=n.next){case 0:n.prev=0;n.next=3;return Object(c["b"])(v["API"].post,v["apiRegistry"].buildApiUrl(y["q"]),e);case 3:t=n.sent;n.next=9;break;case 6:n.prev=6;n.t0=n["catch"](0);console.log("ERROR in set favourite Items saga call",n.t0);case 9:case"end":return n.stop()}},R,this,[[0,6]])}function $(){return a.a.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return Object(c["e"])(y["e"],q);case 3:t.next=5;return Object(c["e"])(y["g"],M);case 5:t.next=7;return Object(c["e"])(y["a"],U);case 7:t.next=9;return Object(c["e"])(y["b"],L);case 9:t.next=11;return Object(c["e"])(y["q"],G);case 11:t.next=16;break;case 13:t.prev=13;t.t0=t["catch"](0);console.log("ERROR on Menu page saga",t.t0);case 16:case"end":return t.stop()}},I,this,[[0,13]])}},987:function(e,t,r){e.exports=r(988)},988:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(207);r.d(t,"default",function(){return n["a"]})}},[987]);return{page:e.default}});